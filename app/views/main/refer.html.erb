<%= render partial: "shared/navbar" %>
<div class="container mx-auto px-4 py-6 max-w-2xl">
  <div class="mb-6">
    <%= image_tag "invite banner1.png" ,alt:"Win Assure", class:"w-full h-40 rounded-xl shadow-md" %>
  </div>
  <% if params[:refer_code] && params[:app_offer] %>
    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
      <h1 class="text-xl font-semibold text-center text-gray-800 mb-4">Refer and Earn Paytm Cashback</h1>
      <div class="space-y-3 text-sm">
        <div>
          <h2 class="text-base font-medium text-gray-700">Hello, Friend</h2>
          <hr class="my-2 border-gray-200">
          <p class="text-gray-600">Complete the <%= @app_offer.offer_name %> task from my refer link and get <%= @app_offer.offer_amount %> Paytm cash instantly.</p>
        </div>
        <div>
          <p class="text-gray-600">Referral Code: <span class="font-medium text-blue-600"><%= @refer_code %></span></p>
        </div>
        <div>
          <p class="font-medium text-gray-700 mb-1">Your referral link:</p>
          <div class="bg-gray-50 p-2 rounded-md text-center">
            <a id="referLink" href="/referral/?app_offer=<%= @app_offer.identifier %>&refer_code=<%= @refer_code %>" class="text-blue-500 text-xs break-all">https://growbuddy.co/referral/?app_offer=<%= @app_offer.identifier %>&refer_code=<%= @refer_code %>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="flex space-x-3 mb-6">
      <button  id="copyBtn" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition duration-300 text-sm">
        Copy Link
      </button>
      <button class="flex-1  text-white font-medium py-2 px-4 rounded-lg transition duration-300 text-sm" style="background-color:#FF6600">
        Share on WhatsApp
      </button>
    </div>
  <% else %>
    <%= form_with( method: :post, class: "p-4 bg-white shadow-xs w-full max-w-md flex flex-col gap-4 mb-6" ) do |form| %>
      <p class="text-red-500"><%= alert %></p>
      <div class="flex flex-col gap-2">
        <%= form.label "Mobile Number", class: "text-gray-700 font-medium" %>
        <%= form.telephone_field :mobile_number, class: "text-md p-2 border border-gray-300 rounded-md ", placeholder: "Enter Valid Paytm Number", required: true %>
      </div>
      <div class="flex flex-col gap-2">
        <%= form.label "Select Offer", class: "text-gray-700 font-medium" %>
        <%= form.select :app_offer, AppOffer.active.limit(10).map { |app_offer| ["#{app_offer.offer_name} - #{app_offer.offer_amount}", app_offer.identifier] }, {}, class: 'w-full p-2 border border-gray-300 rounded-md shadow-sm' %>
      </div>
      <div class="flex justify-center gap-4">
        <%= form.submit "Submit", class: "bg-red-500 w-full text-white font-semibold p-2 rounded-md shadow-md hover:bg-red600 transition duration-300" %>
      </div>
    <% end %>
  <% end %>
  <%# <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
    <h2 class="text-lg font-semibold text-gray-800 mb-4">Connect With Us</h2>
    <div class="flex justify-center space-x-8">
      <a href="https://www.youtube.com/watch?v=7uEPK1lAnN4" class="flex flex-col items-center transition duration-300 hover:opacity-80 h-20 w-20">
        <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fi.pinimg.com%2Foriginals%2F19%2F7b%2F36%2F197b365922d1ea3aa1a932ff9bbda4a6.png&f=1&nofb=1&ipt=6eb906ea589c56374a860f513123c1ffbd35fcde224bbd88b7c2a327143765b9&ipo=images" alt="YouTube" class="w-full rounded-lg">
        <span class="mt-2 text-sm font-medium text-red-600">YouTube</span>
      </a>
      <a href="#" class="flex flex-col items-center transition duration-300 hover:opacity-80 h-20 w-14">
        <img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fclipartcraft.com%2Fimages%2Flogo-channel-telegram.png&f=1&nofb=1&ipt=ebdf06ccab1fb4626d2ac03c0e3471ac424ee4e301637d13fc2b2a526087e7f0&ipo=images" alt="Telegram" class="w-full rounded-lg">
        <span class="mt-2 text-sm font-medium text-blue-600">Telegram</span>
      </a>
    </div>
  </div> %>
  <div class="mb-6">
    <img src="https://images-app-trigmasoft.web.app/payout.png" alt="Payout" class="w-full h-38 rounded-xl shadow-sm">
  </div>
</div>
